var x=(t,s,n)=>new Promise((p,r)=>{var a=u=>{try{f(n.next(u))}catch(q){r(q)}},o=u=>{try{f(n.throw(u))}catch(q){r(q)}},f=u=>u.done?p(u.value):Promise.resolve(u.value).then(a,o);f((n=n.apply(t,s)).next())});import{_ as P,o as i,b as l,h as e,w as U,i as m,v as h,n as g,t as c,j as d,k as b,l as y,F as w,m as v,p as k,q as E,u as C,x as S,y as V,r as F}from"./vendor.05ccf0d1.js";const N="http://127.0.0.1:8000",R={data(){return{step:1,form:{firstName:"",lastName:"",email:"",phoneCode:"+234",phone:"",age:"",gender:"",site:"",processor:"",crop:"",currentEquipment:"",desiredEquipment:"",quantity:"",quantityUnit:"Unit",address:"",idType:"",idNumber:"",idDocument:null,farmDocument:null,profilePicture:null,password:"",confirmPassword:"",smartphone:"",bankAccount:"",bankName:"",bankAccountNumber:"",farmName:"",farmAddress:"",longitude:"",latitude:"",crops:[{name:"",volume:"",volumeUnit:"kg",startMonth:"",endMonth:""}]},profilePictureUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTrsaTeFqurvUDvMYOcgZAd-JPf-dtLogrrog&s",showPassword:!1,showConfirmPassword:!1,errors:{},siteList:[],cropList:[],equipmentList:[],monthList:["January","February","March","April","May","June","July","August","September","October","November","December"],response:{user_id:"",farm_id:"",farmer_id:""}}},mounted(){this.fetchSites()},watch:{"form.firstName"(t){t?/^[A-Za-z\s]+$/.test(t)?(this.errors.firstName="",delete this.errors.firstName):this.errors.firstName="First name cannot contain numbers":this.errors.firstName="First name is required"},"form.lastName"(t){t?/^[A-Za-z\s]+$/.test(t)?(this.errors.lastName="",delete this.errors.lastName):this.errors.lastName="Last name cannot contain numbers":this.errors.lastName="Last name is required"},"form.email"(t){t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?(this.errors.email="",delete this.errors.email):this.errors.email="Enter a valid email address":this.errors.email="Email is required"},"form.phone"(t){t?/^[0-9]{7,15}$/.test(t)?(this.errors.phone="",delete this.errors.phone):this.errors.phone="Enter a valid phone number (numbers only)":this.errors.phone="Phone number is required"},"form.age"(t){t?/^\d+$/.test(t)?(this.errors.age="",delete this.errors.age):this.errors.age="Enter a valid age (positive numbers only)":this.errors.age="Valid age is required"},"form.gender"(t){this.errors.gender=t?"":"Gender is required",t&&delete this.errors.gender},"form.address"(t){this.errors.address=t?"":"Address is required",t&&delete this.errors.address},"form.site"(t){this.errors.site=t?"":"Site is required",t&&delete this.errors.site},"form.crop":function(t){this.errors.crop=t?"":"Crops is required",t&&delete this.errors.crop},"form.currentEquipment":function(t){this.errors.currentEquipment=t?"":"Current Equipment is required",t===this.form.desiredEquipment?this.errors.currentEquipment="Current Equipment Can't be Same as Desired Equipment":t&&delete this.errors.currentEquipment},"form.desiredEquipment":function(t){this.errors.desiredEquipment=t?"":"Desired Equipment is required",this.form.currentEquipment===t?this.errors.desiredEquipment="Desired Equipment Can't be Same as Current Equipment":t&&delete this.errors.desiredEquipment},"form.quantity":function(t){t?/^\d+$/.test(t)?(this.errors.quantity="",delete this.errors.quantity):this.errors.quantity="Quantity must be a positive number":this.errors.quantity="Quantity is required"},"form.idType"(t){t&&!this.form.idNumber?this.errors.idNumber="Selected ID's Number is required":(this.errors.idNumber="",delete this.errors.idNumber)},"form.idNumber"(t){this.form.idType&&!t?this.errors.idNumber="Selected ID's Number is required":(this.errors.idNumber="",delete this.errors.idNumber)},"form.password"(t){t?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(t)?(this.errors.password="",delete this.errors.password):this.errors.password="Password must be at least 8 characters long, contain one uppercase, one lowercase, one number, and one special character":this.errors.password="Password is required"},"form.confirmPassword"(t){t?t!==this.form.password?this.errors.confirmPassword="Passwords do not match":(this.errors.confirmPassword="",delete this.errors.confirmPassword):this.errors.confirmPassword="Confirm Password is required"},"form.smartphone"(t){t?(this.errors.smartphone="",delete this.errors.smartphone):this.errors.smartphone="Please select if you have a smartphone"},"form.bankAccount"(t){t?(this.errors.bankAccount="",delete this.errors.bankAccount):this.errors.bankAccount="Please select one of the above options"},"form.bankAccountNumber"(t){this.form.bankAccount==="Yes"&&(t?/^\d+$/.test(t)?(this.errors.bankAccountNumber="",delete this.errors.bankAccountNumber):this.errors.bankAccountNumber="Bank Account Number must contain only numbers":this.errors.bankAccountNumber="Bank Account Number is required")},"form.farmName"(t){t?/^[A-Za-z\s]+$/.test(t)?(this.errors.farmName="",delete this.errors.farmName):this.errors.farmName="Farm name can only contain letters and spaces":this.errors.farmName="Farm name is required"},"form.latitude"(t){t&&!/^-?([1-8]?[0-9]|90)(\.\d+)?$/.test(t)?this.errors.latitude="Invalid latitude format":(this.errors.latitude="",delete this.errors.latitude)},"form.longitude"(t){t&&!/^-?((1[0-7][0-9])|([1-9]?[0-9]))(\.\d+)?$/.test(t)?this.errors.longitude="Invalid longitude format":(this.errors.longitude="",delete this.errors.longitude)},"form.crops":{handler(t){!Array.isArray(t)||t.forEach((s,n)=>{s.name?(this.errors[`crop_${n}_name`]="",delete this.errors[`crop_${n}_name`]):this.errors[`crop_${n}_name`]="Crop name is required",s.volume?/^\d+$/.test(s.volume)?(this.errors[`crop_${n}_volume`]="",delete this.errors[`crop_${n}_volume`]):this.errors[`crop_${n}_volume`]="Volume must be a positive number":this.errors[`crop_${n}_volume`]="Volume is required",s.startMonth?(this.errors[`crop_${n}_startMonth`]="",delete this.errors[`crop_${n}_startMonth`]):this.errors[`crop_${n}_startMonth`]="Start month is required",s.endMonth?(this.errors[`crop_${n}_endMonth`]="",delete this.errors[`crop_${n}_endMonth`]):this.errors[`crop_${n}_endMonth`]="End month is required"})},deep:!0}},methods:{fetchSites(){return x(this,null,function*(){try{const s=yield(yield fetch(`${N}/api/method/farmer.api.user_api.fetch_site_list`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();s&&s.message?this.siteList=s.message.data.map(n=>n):this.errors.site="Unexpected response format"}catch(t){this.errors.site="Failed to fetch sites",console.error(t)}try{const s=yield(yield fetch(`${N}/api/resource/Equipment Master?fields=["name"]&limit_page_length=1000`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();s&&s.data?(this.equipmentList=s.data.map(n=>n),console.log("data",this.equipmentList)):(this.errors.currentEquipment="Unexpected response format",this.errors.desiredEquipment="Unexpected response format")}catch(t){this.errors.currentEquipment="Failed to fetch Equipment",this.errors.desiredEquipment="Failed to fetch Equipment",console.error(t)}try{const s=yield(yield fetch(`${N}/api/method/farmer.api.user_api.get_all_crops`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();s&&s.message?this.cropList=s.message.crops.map(n=>n):this.errors.crop="Unexpected response format"}catch(t){this.errors.crop="Failed to fetch Crops",console.error(t)}})},registerUser(){return x(this,null,function*(){try{const t={user_type:"farmer",first_name:this.form.firstName,last_name:this.form.lastName,email:this.form.email,phone:`${this.form.phoneCode}${this.form.phone}`,gender:this.form.gender,location:this.form.address,new_password:this.form.password,id_type:this.form.idType,id_number:this.form.idNumber,bank_name:this.form.bankName,account_number:this.form.bankAccountNumber,crops_processed:this.form.processor==="Yes"&&this.form.crop||"",qty_processed_daily:this.form.processor==="Yes"&&this.form.quantity||"",equipments_used:this.form.processor==="Yes"&&this.form.currentEquipment||"",unit:this.form.processor==="Yes"&&this.form.quantityUnit||"",site:this.form.site,farm_name:this.form.farmName,longitude:this.form.longitude,latitude:this.form.latitude,crops:this.form.crops.map(p=>p.name),actual_crops:this.form.crops.map(p=>({crop_name:p.name,start_month:p.startMonth,end_month:p.endMonth,quantity:p.volume,unit:p.volumeUnit}))};console.log({requestData:t});const n=yield(yield fetch(`${N}/api/method/farmer.api.user_api.create_user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return n.status==201&&n.message?(console.log("User Registration Success:",n.message),n.message):(console.error("Unexpected API response format:",n),n)}catch(t){return console.error("Failed to register user:",t),t}})},upload_file(){return x(this,null,function*(){try{const t=new FormData;t.append("user_email",this.response.user_id),t.append("farmer_id",this.response.farmer_id),t.append("farm_name",this.response.farm_id),t.append("profile_image",this.form.profilePicture),t.append("id_document",this.form.idDocument),t.append("farm_document",this.form.farmDocument);const n=(yield(yield fetch(`${N}/api/method/farmer.api.user_api.upload_profile_picture`,{method:"POST",body:t})).json()).message;return n&&n.status==200?(console.log("Upload successful:",n.message),!0):(console.error("Unexpected response format:",n),!1)}catch(t){console.error("Upload failed:",t)}})},validateStep(){if(this.errors={},this.step===1){this.errors={};const t=/^[A-Za-z\s]+$/,s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,n=/^[0-9]{7,15}$/,p=/^[1-9]\d*$/;this.form.firstName?t.test(this.form.firstName)||(this.errors.firstName="First name cannot contain numbers"):this.errors.firstName="First name is required",this.form.lastName?t.test(this.form.lastName)||(this.errors.lastName="Last name cannot contain numbers"):this.errors.lastName="Last name is required",this.form.email?s.test(this.form.email)||(this.errors.email="Enter a valid email address"):this.errors.email="Email is required",this.form.phone?n.test(this.form.phone)||(this.errors.phone="Enter a valid phone number (numbers only)"):this.errors.phone="Phone number is required",this.form.age?p.test(this.form.age)||(this.errors.phone="Enter a valid age (positive numbers only)"):this.errors.age="Valid age is required",this.form.gender||(this.errors.gender="Gender is required"),this.form.address||(this.errors.address="Address is required"),this.form.site||(this.errors.site="Site is required"),this.form.processor||(this.errors.processor="Processor is required"),this.form.processor==="Yes"&&(this.form.crop||(this.errors.crop="Crops is required"),this.form.currentEquipment||(this.errors.currentEquipment="Current Equipment is required"),this.form.desiredEquipment||(this.errors.desiredEquipment="Desired Equipment is required"),this.form.quantity?p.test(this.form.quantity)||(this.errors.quantity="Quantity must be a positive number"):this.errors.quantity="Quantity is required"),this.form.idType&&!this.form.idNumber&&(this.errors.idNumber="Selected ID's Number is required")}if(this.step===2){const t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;this.form.password?t.test(this.form.password)||(this.errors.password="Password must be at least 8 characters long, contain one uppercase, one lowercase, one number, and one special character"):this.errors.password="Password is required",this.form.confirmPassword?this.form.confirmPassword!==this.form.password&&(this.errors.confirmPassword="Passwords do not match"):this.errors.confirmPassword="Confirm Password is required"}if(this.step===3&&(this.form.smartphone||(this.errors.smartphone="Please select one of the above options"),this.form.bankAccount?this.form.bankAccount==="Yes"&&(this.form.bankName||(this.errors.bankName="Bank name is required"),this.form.bankAccountNumber?/^\d+$/.test(this.form.bankAccountNumber)||(this.errors.bankAccountNumber="Bank account number must be numeric"):this.errors.bankAccountNumber="Bank account number is required"):this.errors.bankAccount="Please select one of the above options"),this.step===4){const t=/^[A-Za-z\s]+$/;this.form.farmName?t.test(this.form.farmName)?(this.errors.farmName="",delete this.errors.farmName):this.errors.farmName="Farm name can only contain letters and spaces":this.errors.farmName="Farm name is required";const s=/^-?([1-8]?[0-9]|90)(\.\d+)?$/,n=/^-?((1[0-7][0-9])|([1-9]?[0-9]))(\.\d+)?$/;this.form.latitude&&!s.test(this.form.latitude)?this.errors.latitude="Invalid latitude format":(this.errors.latitude="",delete this.errors.latitude),this.form.longitude&&!n.test(this.form.longitude)?this.errors.longitude="Invalid longitude format":(this.errors.longitude="",delete this.errors.longitude),this.form.crops.forEach((p,r)=>{p.name?(this.errors[`crop_${r}_name`]="",delete this.errors[`crop_${r}_name`]):this.errors[`crop_${r}_name`]="Crop name is required",p.volume?/^\d+$/.test(p.volume)?(this.errors[`crop_${r}_volume`]="",delete this.errors[`crop_${r}_volume`]):this.errors[`crop_${r}_volume`]="Volume must be a positive number":this.errors[`crop_${r}_volume`]="Volume is required",p.startMonth?(this.errors[`crop_${r}_startMonth`]="",delete this.errors[`crop_${r}_startMonth`]):this.errors[`crop_${r}_startMonth`]="Start month is required",p.endMonth?(this.errors[`crop_${r}_endMonth`]="",delete this.errors[`crop_${r}_endMonth`]):this.errors[`crop_${r}_endMonth`]="End month is required"})}return Object.keys(this.errors).length===0},addAnotherCrop(){console.log("this.crops",this.form.crops),this.form.crops.push({name:"",volume:"",volumeUnit:"Unit",startMonth:"",endMonth:""})},removeCrop(t){this.form.crops.splice(t,1)},nextStep(){if(console.log("checking error",this.errors),this.validateStep())this.step<4&&this.step++;else return},previousStep(){this.step>1&&this.step--},toggleProcessorFields(){this.form.processor!=="Yes"},toggleBankDetailsFields(){this.form.bankAccount!=="Yes"&&(this.form.bankName="",this.form.bankAccountNumber="")},togglePasswordVisibility(t){t==="password"?(this.showPassword=!this.showPassword,document.getElementById("password").type=this.showPassword?"text":"password"):t==="confirm-password"&&(this.showConfirmPassword=!this.showConfirmPassword,document.getElementById("confirm-password").type=this.showConfirmPassword?"text":"password")},triggerFileInput(){this.$refs.fileInput.click()},handleFileUpload(t,s){const n=t.target.files[0];if(n){if(n.type!=="application/pdf"){alert("Only PDF files are allowed!");return}if(n.size>10*1024*1024){alert("File size must be less than 10MB!");return}s=="ID"?(this.form.idDocument=n,console.log("ID")):(this.form.farmDocument=n,console.log("Document"))}},handleFileDrop(t){t.preventDefault();const s=t.dataTransfer.files[0];s&&this.handleFileUpload({target:{files:[s]}})},changeProfilePicture(t){const s=t.target.files[0];this.form.profilePicture=s;const n=new FileReader;n.onload=p=>{this.profilePictureUrl=p.target.result},n.readAsDataURL(s)},handleSubmit(){return x(this,null,function*(){if(this.validateStep()){if(this.step===4)try{const t=yield this.registerUser();console.log({respo:t}),t&&t.message==="User Created Successfully"?(this.response.user_id=t.data.user_id,this.response.farm_id=t.data.farm_id,this.response.farmer_id=t.data.farmer_id,(yield this.upload_file())?(console.log("Redirecting to login..."),window.location.href="/login"):console.error("Registration failed: Due to File Upload")):console.error("Registration failed:",t.message)}catch(t){console.error("Failed to register. Please try again!",t)}}else console.log("Form validation failed:",this.errors,this.validateStep())})}},name:"farmerRegister"},D={class:"container mx-auto p-4"},M={class:"flex justify-between items-center mb-6"},I=e("i",{class:"fas fa-arrow-left"},null,-1),B=k(" Back home "),L=[I,B],T=e("a",{class:"text-gray-600",href:"#"},[k(" Already have an account? "),e("span",{class:"text-green-600"},"Log in")],-1),j={class:"max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-md"},Y=e("h2",{class:"text-2xl font-semibold text-center mb-4"},"Create Account",-1),z={key:0},Z=e("p",{class:"text-center text-gray-600 mb-8"},"Personal Information",-1),G={class:"grid md:grid-cols-2 gap-4 mb-4"},O=e("label",{class:"block text-gray-700",for:"first-name"},"First Name *",-1),J={key:0,class:"text-red-500 text-sm mt-1"},W=e("label",{class:"block text-gray-700",for:"last-name"},"Last Name *",-1),K={key:0,class:"text-red-500 text-sm mt-1"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},H={class:"mb-4"},X=e("label",{class:"block text-gray-700",for:"email"},"Email",-1),$={key:0,class:"text-red-500 text-sm mt-1"},ee={class:"mb-4"},re=e("label",{class:"block text-gray-700",for:"phone"},"Phone *",-1),se={class:"flex"},te=e("option",{value:"+234"},"+234",-1),oe=[te],ie={key:0,class:"text-red-500 text-sm mt-1"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},le=e("label",{class:"block text-gray-700",for:"age-group"},"Age Group *",-1),ae={key:0,class:"text-red-500 text-sm mt-1"},de=e("label",{class:"block text-gray-700"},"Gender *",-1),me={class:"flex items-center mt-1"},ce=e("label",{class:"mr-4",for:"male"},"Male",-1),ue=e("label",{for:"female"},"Female",-1),pe={key:0,class:"text-red-500 text-sm mt-1"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},he={class:"mb-4"},ge=e("label",{class:"block text-gray-700",for:"site"},"Site *",-1),be=e("option",{value:""},"Select...",-1),_e=["value"],ye={key:0,class:"text-red-500 text-sm mt-1"},we={class:"mb-4"},xe=e("label",{class:"block text-gray-700"},"Are you a processor? *",-1),ve={class:"flex items-center mt-1"},ke=e("label",{class:"mr-4",for:"processor-yes"},"Yes",-1),Ne=e("label",{for:"processor-no"},"No",-1),qe={key:0,class:"text-red-500 text-sm mt-1"},Pe={key:0,class:"mb-4"},Ue={class:"mb-4"},Ce=e("label",{class:"block text-gray-700",for:"crop-field"},"What crops do you process? *",-1),Fe=e("option",{value:""},"Select...",-1),Ae=["value"],Ee={key:0,class:"text-red-500 text-sm mt-1"},Se={class:"mb-4"},Ve=e("label",{class:"block text-gray-700",for:"current-equipment"},"What equipment do you use currently? *",-1),Re=e("option",{value:""},"Select...",-1),De=["value"],Me={key:0,class:"text-red-500 text-sm mt-1"},Ie={class:"mb-4"},Be=e("label",{class:"block text-gray-700",for:"desired-equipment"},"What equipment do you want to get? *",-1),Le=e("option",{value:""},"Select...",-1),Te=["value"],je={key:0,class:"text-red-500 text-sm mt-1"},Ye={class:"mb-4"},ze=e("label",{class:"block text-gray-700",for:"quantity"},"What quantity do you process daily? *",-1),Ze={class:"flex"},Ge=e("option",{value:"Kg"},"Kg",-1),Oe=e("option",{value:"Bag"},"Bag",-1),Je=[Ge,Oe],We={key:0,class:"text-red-500 text-sm mt-1"},Ke={class:"mb-4"},Qe=e("label",{class:"block text-gray-700",for:"address"},"Residential address *",-1),He={key:0,class:"text-red-500 text-sm mt-1"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},$e={class:"mb-4"},er=e("label",{class:"block text-gray-700",for:"id-type"},"ID Type *",-1),rr=E('<option value="">Select...</option><option value="Driver&#39;s License">Driver&#39;s License</option><option value="National Identity Number"> National Identity Number </option><option value="International Passport"> International Passport </option><option value="Permanent Voter&#39;s Card"> Permanent Voter&#39;s Card </option>',5),sr=[rr],tr={class:"mb-4"},or=e("label",{class:"block text-gray-700",for:"id-number"},"ID number",-1),ir={key:0,class:"text-red-500 text-sm mt-1"},nr={class:"mb-4"},lr=e("label",{class:"block text-gray-700",for:"id-document"},"Upload ID document",-1),ar={key:0,class:"text-red-500 text-sm mt-1"},dr={class:"mb-4"},mr=e("label",{class:"block text-gray-700",for:"profile-picture"}," Upload profile picture (optional) ",-1),cr={class:"flex items-center mt-1"},ur=["src"],pr={class:"flex justify-between"},fr={key:1},hr=e("h2",{class:"text-2xl font-semibold text-center mb-4"}," Security Setup ",-1),gr={class:"mb-4"},br=e("label",{class:"block text-gray-700",for:"password"},"Password *",-1),_r={class:"relative"},yr=e("i",{class:"fas fa-eye"},null,-1),wr=[yr],xr={key:0,class:"text-red-500 text-sm mt-1"},vr={class:"mb-4"},kr=e("label",{class:"block text-gray-700",for:"confirm-password"},"Confirm password *",-1),Nr={class:"relative"},qr=e("i",{class:"fas fa-eye"},null,-1),Pr=[qr],Ur={key:0,class:"text-red-500 text-sm mt-1"},Cr=e("div",{class:"mb-4"},[e("h3",{class:"text-gray-700 font-semibold"},"Password Requirements"),e("ul",{class:"list-disc list-inside text-gray-600"},[e("li",null,"Must be at least 8 characters"),e("li",null,"Must contain one special character and one number"),e("li",null,"Must contain one uppercase and lowercase letter")])],-1),Fr={class:"flex justify-between"},Ar={key:2},Er=e("h2",{class:"text-2xl font-semibold text-center mb-4"},"Bank Details",-1),Sr={class:"mb-4"},Vr=e("label",{class:"block text-gray-700"},"Do you have a smartphone? *",-1),Rr={class:"flex items-center mt-1"},Dr=e("label",{class:"mr-4",for:"smartphone-yes"},"Yes",-1),Mr=e("label",{for:"smartphone-no"},"No",-1),Ir={key:0,class:"text-red-500 text-sm mt-1"},Br={class:"mb-4"},Lr=e("label",{class:"block text-gray-700"},"Do you have a bank account? *",-1),Tr={class:"flex items-center mt-1"},jr=e("label",{class:"mr-4",for:"bank-account-yes"},"Yes",-1),Yr=e("label",{for:"bank-account-no"},"No",-1),zr={key:0,class:"text-red-500 text-sm mt-1"},Zr={key:0,class:"mb-4"},Gr={key:0,class:"mb-4"},Or=e("label",{class:"block text-gray-700",for:"bank-name"},"Bank Name *",-1),Jr={key:0,class:"text-red-500 text-sm mt-1"},Wr={key:1,class:"mb-4"},Kr=e("label",{class:"block text-gray-700",for:"bank-account-number"},"Personal Bank Account Number *",-1),Qr={key:0,class:"text-red-500 text-sm mt-1"},Hr={class:"flex justify-between"},Xr={key:3},$r=e("h2",{class:"text-2xl font-semibold text-center mb-4"}," Farm Registration ",-1),es={class:"mb-4"},rs=e("label",{class:"block text-gray-700",for:"farm-name"},"Farm Name *",-1),ss={key:0,class:"text-red-500 text-sm mt-1"},ts={class:"mb-4"},os=e("label",{class:"block text-gray-700",for:"farm-address"},"Address",-1),is={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},ns={class:"mb-4"},ls=e("label",{class:"block text-gray-700",for:"longitude"},"Longitude",-1),as={key:0,class:"text-red-500 text-sm mt-1"},ds={class:"mb-4"},ms=e("label",{class:"block text-gray-700",for:"latitude"},"Latitude",-1),cs={key:0,class:"text-red-500 text-sm mt-1"},us={class:"mb-4"},ps=e("label",{class:"block text-gray-700"},"Crops cultivated and planting season",-1),fs=["onClick"],hs={class:"mb-4"},gs=["for"],bs=["id","onUpdate:modelValue"],_s=["value"],ys={key:0,class:"text-red-500 text-sm mt-1"},ws={class:"mb-4"},xs=["for"],vs={class:"flex"},ks=["onUpdate:modelValue"],Ns=e("option",{value:"Kg"},"Kg",-1),qs=e("option",{value:"Bag"},"Bag",-1),Ps=[Ns,qs],Us=["id","onUpdate:modelValue"],Cs={key:0,class:"text-red-500 text-sm mt-1"},Fs={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},As={class:"mb-4"},Es=["for"],Ss=["id","onUpdate:modelValue"],Vs=e("option",{value:""},"Select...",-1),Rs=["value"],Ds={key:0,class:"text-red-500 text-sm mt-1"},Ms={class:"mb-4"},Is=["for"],Bs=["id","onUpdate:modelValue"],Ls=e("option",{value:""},"Select...",-1),Ts=["value"],js={key:0,class:"text-red-500 text-sm mt-1"},Ys={class:"mb-4"},zs=e("label",{class:"block text-gray-700"},"Upload farm documents",-1),Zs=e("i",{class:"fas fa-upload text-gray-600 text-2xl mb-2"},null,-1),Gs=e("p",{class:"text-gray-600"}," Click to upload or drag and drop your files here ",-1),Os=e("p",{class:"text-gray-600"},"PDF file only (max. 10MB)",-1),Js={key:0,class:"text-green-600 mt-2"},Ws={class:"flex justify-between"};function Ks(t,s,n,p,r,a){return i(),l("div",D,[e("div",M,[e("a",{class:"text-green-600",onClick:s[0]||(s[0]=o=>t.$emit("goBack")),href:"#"},L),T]),e("div",j,[Y,e("form",{class:"multiform",onSubmit:s[53]||(s[53]=U((...o)=>a.handleSubmit&&a.handleSubmit(...o),["prevent"]))},[r.step===1?(i(),l("div",z,[Z,e("div",G,[e("div",null,[O,m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.firstName,"border-gray-300":!r.errors.firstName}]),id:"first-name",placeholder:"First Name",type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>r.form.firstName=o),required:""},null,2),[[h,r.form.firstName]]),r.errors.firstName?(i(),l("p",J,c(r.errors.firstName),1)):d("",!0)]),e("div",null,[W,m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.lastName,"border-gray-300":!r.errors.lastName}]),id:"last-name",placeholder:"Last Name",type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>r.form.lastName=o)},null,2),[[h,r.form.lastName]]),r.errors.lastName?(i(),l("p",K,c(r.errors.lastName),1)):d("",!0)])]),e("div",Q,[e("div",H,[X,m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.email,"border-gray-300":!r.errors.email}]),id:"email",placeholder:"Email",type:"email","onUpdate:modelValue":s[3]||(s[3]=o=>r.form.email=o),required:""},null,2),[[h,r.form.email]]),r.errors.email?(i(),l("p",$,c(r.errors.email),1)):d("",!0)]),e("div",ee,[re,e("div",se,[m(e("select",{class:g(["border p-2 rounded-l",{"border-red-500":r.errors.phone,"border-gray-300":!r.errors.phone}]),"onUpdate:modelValue":s[4]||(s[4]=o=>r.form.phoneCode=o)},oe,2),[[b,r.form.phoneCode]]),m(e("input",{class:g(["w-full border p-2 rounded-r",{"border-red-500":r.errors.phone,"border-gray-300":!r.errors.phone}]),id:"phone",placeholder:"Phone Number",type:"text","onUpdate:modelValue":s[5]||(s[5]=o=>r.form.phone=o),required:""},null,2),[[h,r.form.phone]])]),r.errors.phone?(i(),l("p",ie,c(r.errors.phone),1)):d("",!0)])]),e("div",ne,[e("div",null,[le,m(e("input",{type:"number",id:"age-group",class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.age,"border-gray-300":!r.errors.age}]),placeholder:"Enter Age",min:"1","onUpdate:modelValue":s[6]||(s[6]=o=>r.form.age=o),required:""},null,2),[[h,r.form.age]]),r.errors.age?(i(),l("p",ae,c(r.errors.age),1)):d("",!0)]),e("div",null,[de,e("div",me,[m(e("input",{class:"mr-2",id:"male",name:"gender",type:"radio",value:"Male","onUpdate:modelValue":s[7]||(s[7]=o=>r.form.gender=o)},null,512),[[y,r.form.gender]]),ce,m(e("input",{class:"mr-2",id:"female",name:"gender",type:"radio",value:"Female","onUpdate:modelValue":s[8]||(s[8]=o=>r.form.gender=o)},null,512),[[y,r.form.gender]]),ue]),r.errors.gender?(i(),l("p",pe,c(r.errors.gender),1)):d("",!0)])]),e("div",fe,[e("div",he,[ge,m(e("select",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.site,"border-gray-300":!r.errors.site}]),id:"site","onUpdate:modelValue":s[9]||(s[9]=o=>r.form.site=o)},[be,(i(!0),l(w,null,v(this.siteList,o=>(i(),l("option",{value:o.name},c(o.site_name),9,_e))),256))],2),[[b,r.form.site]]),r.errors.site?(i(),l("p",ye,c(r.errors.site),1)):d("",!0)]),e("div",we,[xe,e("div",ve,[m(e("input",{class:"mr-2",id:"processor-yes",name:"processor",type:"radio",value:"Yes","onUpdate:modelValue":s[10]||(s[10]=o=>r.form.processor=o),onChange:s[11]||(s[11]=(...o)=>a.toggleProcessorFields&&a.toggleProcessorFields(...o))},null,544),[[y,r.form.processor]]),ke,m(e("input",{class:"mr-2",id:"processor-no",name:"processor",type:"radio",value:"No","onUpdate:modelValue":s[12]||(s[12]=o=>r.form.processor=o),onChange:s[13]||(s[13]=(...o)=>a.toggleProcessorFields&&a.toggleProcessorFields(...o))},null,544),[[y,r.form.processor]]),Ne]),r.errors.processor?(i(),l("p",qe,c(r.errors.processor),1)):d("",!0)])]),r.form.processor==="Yes"?(i(),l("div",Pe,[e("div",Ue,[Ce,m(e("select",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.crop,"border-gray-300":!r.errors.crop}]),id:"crop-field","onUpdate:modelValue":s[14]||(s[14]=o=>r.form.crop=o)},[Fe,(i(!0),l(w,null,v(this.cropList,o=>(i(),l("option",{value:o.name},c(o.name),9,Ae))),256))],2),[[b,r.form.crop]]),r.errors.crop?(i(),l("p",Ee,c(r.errors.crop),1)):d("",!0)]),e("div",Se,[Ve,m(e("select",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.currentEquipment,"border-gray-300":!r.errors.currentEquipment}]),id:"current-equipment","onUpdate:modelValue":s[15]||(s[15]=o=>r.form.currentEquipment=o)},[Re,(i(!0),l(w,null,v(this.equipmentList,o=>(i(),l("option",{value:o.name},c(o.name),9,De))),256))],2),[[b,r.form.currentEquipment]]),r.errors.currentEquipment?(i(),l("p",Me,c(r.errors.currentEquipment),1)):d("",!0)]),e("div",Ie,[Be,m(e("select",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.desiredEquipment,"border-gray-300":!r.errors.desiredEquipment}]),id:"desired-equipment","onUpdate:modelValue":s[16]||(s[16]=o=>r.form.desiredEquipment=o)},[Le,(i(!0),l(w,null,v(this.equipmentList,o=>(i(),l("option",{value:o.name},c(o.name),9,Te))),256))],2),[[b,r.form.desiredEquipment]]),r.errors.desiredEquipment?(i(),l("p",je,c(r.errors.desiredEquipment),1)):d("",!0)]),e("div",Ye,[ze,e("div",Ze,[m(e("select",{class:g(["border p-2 rounded-l",{"border-red-500":r.errors.quantity,"border-gray-300":!r.errors.quantity}]),"onUpdate:modelValue":s[17]||(s[17]=o=>r.form.quantityUnit=o)},Je,2),[[b,r.form.quantityUnit]]),m(e("input",{class:g(["w-full border p-2 rounded-r",{"border-red-500":r.errors.quantity,"border-gray-300":!r.errors.quantity}]),id:"quantity",placeholder:"E.g. 35",type:"text","onUpdate:modelValue":s[18]||(s[18]=o=>r.form.quantity=o)},null,2),[[h,r.form.quantity]])]),r.errors.quantity?(i(),l("p",We,c(r.errors.quantity),1)):d("",!0)])])):d("",!0),e("div",Ke,[Qe,m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.address,"border-gray-300":!r.errors.address}]),id:"address",placeholder:"Residential address",type:"text","onUpdate:modelValue":s[19]||(s[19]=o=>r.form.address=o)},null,2),[[h,r.form.address]]),r.errors.address?(i(),l("p",He,c(r.errors.address),1)):d("",!0)]),e("div",Xe,[e("div",$e,[er,m(e("select",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:"id-type","onUpdate:modelValue":s[20]||(s[20]=o=>r.form.idType=o)},sr,512),[[b,r.form.idType]])]),e("div",tr,[or,m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.idNumber,"border-gray-300":!r.errors.idNumber}]),id:"id-number",placeholder:"Enter your selected ID number",type:"text","onUpdate:modelValue":s[21]||(s[21]=o=>r.form.idNumber=o)},null,2),[[h,r.form.idNumber]]),r.errors.idNumber?(i(),l("p",ir,c(r.errors.idNumber),1)):d("",!0)])]),e("div",nr,[lr,e("input",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:"id-document",type:"file",onChange:s[22]||(s[22]=o=>a.handleFileUpload(o,"ID"))},null,32),r.errors.idDocument?(i(),l("p",ar,c(r.errors.idDocument),1)):d("",!0)]),e("div",dr,[mr,e("div",cr,[e("img",{id:"profilePic",alt:"Profile picture",class:"w-10 h-10 rounded-full mr-4",src:this.profilePictureUrl},null,8,ur),e("input",{type:"file",id:"fileInput",onChange:s[23]||(s[23]=(...o)=>a.changeProfilePicture&&a.changeProfilePicture(...o))},null,32)])]),e("div",pr,[e("button",{class:"bg-green-600 text-white px-4 py-2 rounded ml-auto",onClick:s[24]||(s[24]=(...o)=>a.nextStep&&a.nextStep(...o))}," Continue ")])])):d("",!0),r.step===2?(i(),l("div",fr,[hr,e("div",gr,[br,e("div",_r,[m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.password,"border-gray-300":!r.errors.password}]),id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",type:"password","onUpdate:modelValue":s[25]||(s[25]=o=>r.form.password=o)},null,2),[[h,r.form.password]]),e("button",{class:"absolute right-2 top-2 text-gray-600",type:"button",onClick:s[26]||(s[26]=o=>a.togglePasswordVisibility("password"))},wr)]),r.errors.password?(i(),l("p",xr,c(r.errors.password),1)):d("",!0)]),e("div",vr,[kr,e("div",Nr,[m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.confirmPassword,"border-gray-300":!r.errors.confirmPassword}]),id:"confirm-password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",type:"password","onUpdate:modelValue":s[27]||(s[27]=o=>r.form.confirmPassword=o)},null,2),[[h,r.form.confirmPassword]]),e("button",{class:"absolute right-2 top-2 text-gray-600",type:"button",onClick:s[28]||(s[28]=o=>a.togglePasswordVisibility("confirm-password"))},Pr)]),r.errors.confirmPassword?(i(),l("p",Ur,c(r.errors.confirmPassword),1)):d("",!0)]),Cr,e("div",Fr,[e("button",{class:"bg-gray-200 text-gray-700 px-4 py-2 rounded",onClick:s[29]||(s[29]=(...o)=>a.previousStep&&a.previousStep(...o))}," Back "),e("button",{class:"bg-green-600 text-white px-4 py-2 rounded",onClick:s[30]||(s[30]=(...o)=>a.nextStep&&a.nextStep(...o))}," Continue ")])])):d("",!0),r.step===3?(i(),l("div",Ar,[Er,e("div",Sr,[Vr,e("div",Rr,[m(e("input",{class:"mr-2",id:"smartphone-yes",name:"smartphone",type:"radio",value:"Yes","onUpdate:modelValue":s[31]||(s[31]=o=>r.form.smartphone=o)},null,512),[[y,r.form.smartphone]]),Dr,m(e("input",{class:"mr-2",id:"smartphone-no",name:"smartphone",type:"radio",value:"No","onUpdate:modelValue":s[32]||(s[32]=o=>r.form.smartphone=o)},null,512),[[y,r.form.smartphone]]),Mr]),r.errors.smartphone?(i(),l("p",Ir,c(r.errors.smartphone),1)):d("",!0)]),e("div",Br,[Lr,e("div",Tr,[m(e("input",{class:"mr-2",id:"bank-account-yes",name:"bank-account",type:"radio",value:"Yes","onUpdate:modelValue":s[33]||(s[33]=o=>r.form.bankAccount=o),onChange:s[34]||(s[34]=(...o)=>a.toggleBankDetailsFields&&a.toggleBankDetailsFields(...o))},null,544),[[y,r.form.bankAccount]]),jr,m(e("input",{class:"mr-2",id:"bank-account-no",name:"bank-account",type:"radio",value:"No","onUpdate:modelValue":s[35]||(s[35]=o=>r.form.bankAccount=o),onChange:s[36]||(s[36]=(...o)=>a.toggleBankDetailsFields&&a.toggleBankDetailsFields(...o))},null,544),[[y,r.form.bankAccount]]),Yr]),r.errors.bankAccount?(i(),l("p",zr,c(r.errors.bankAccount),1)):d("",!0)]),r.form.bankAccount==="Yes"?(i(),l("div",Zr,[r.form.bankAccount==="Yes"?(i(),l("div",Gr,[Or,m(e("input",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:"bank-name",placeholder:"E.g. ABC Bank",type:"text","onUpdate:modelValue":s[37]||(s[37]=o=>r.form.bankName=o)},null,512),[[h,r.form.bankName]]),r.errors.bankName?(i(),l("p",Jr,c(r.errors.bankName),1)):d("",!0)])):d("",!0),r.form.bankAccount==="Yes"?(i(),l("div",Wr,[Kr,m(e("input",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:"bank-account-number",placeholder:"E.g. 3892756930",type:"text","onUpdate:modelValue":s[38]||(s[38]=o=>r.form.bankAccountNumber=o)},null,512),[[h,r.form.bankAccountNumber]]),r.errors.bankAccountNumber?(i(),l("p",Qr,c(r.errors.bankAccountNumber),1)):d("",!0)])):d("",!0)])):d("",!0),e("div",Hr,[e("button",{class:"bg-gray-200 text-gray-700 px-4 py-2 rounded",onClick:s[39]||(s[39]=(...o)=>a.previousStep&&a.previousStep(...o))}," Back "),e("button",{class:"bg-green-600 text-white px-4 py-2 rounded",onClick:s[40]||(s[40]=(...o)=>a.nextStep&&a.nextStep(...o))}," Continue ")])])):d("",!0),r.step===4?(i(),l("div",Xr,[$r,e("div",es,[rs,m(e("input",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:"farm-name",placeholder:"E.g. Armenia Farms Inc",type:"text","onUpdate:modelValue":s[41]||(s[41]=o=>r.form.farmName=o),onInput:s[42]||(s[42]=(...o)=>t.validateFarmName&&t.validateFarmName(...o))},null,544),[[h,r.form.farmName]]),r.errors.farmName?(i(),l("p",ss,c(r.errors.farmName),1)):d("",!0)]),e("div",ts,[os,m(e("input",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:"farm-address",placeholder:"E.g. 12 landon community, Kogi",type:"text","onUpdate:modelValue":s[43]||(s[43]=o=>r.form.farmAddress=o)},null,512),[[h,r.form.farmAddress]])]),e("div",is,[e("div",ns,[ls,m(e("input",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:"longitude",placeholder:"E.g. 8.8765",type:"text","onUpdate:modelValue":s[44]||(s[44]=o=>r.form.longitude=o)},null,512),[[h,r.form.longitude]]),r.errors.longitude?(i(),l("p",as,c(r.errors.longitude),1)):d("",!0)]),e("div",ds,[ms,m(e("input",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:"latitude",placeholder:"E.g. 8.8765",type:"text","onUpdate:modelValue":s[45]||(s[45]=o=>r.form.latitude=o)},null,512),[[h,r.form.latitude]]),r.errors.latitude?(i(),l("p",cs,c(r.errors.latitude),1)):d("",!0)])]),e("div",us,[ps,(i(!0),l(w,null,v(r.form.crops,(o,f)=>(i(),l("div",{key:f,class:"mb-4 flex flex-col bg-gray-100 p-6 rounded-lg mt-5 relative"},[r.form.crops.length>1?(i(),l("button",{key:0,class:"absolute top-2 right-2 text-black-500 text-xl font-bold",onClick:u=>a.removeCrop(f)}," \u2716 ",8,fs)):d("",!0),e("div",hs,[e("label",{class:"block text-gray-700",for:`crop-${f}`},"What crop do you want to cultivate on this farm? *",8,gs),m(e("select",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:`crop-${f}`,"onUpdate:modelValue":u=>o.name=u},[(i(!0),l(w,null,v(this.cropList,u=>(i(),l("option",{value:u.name},c(u.name),9,_s))),256))],8,bs),[[b,o.name]]),r.errors[`crop_${f}_name`]?(i(),l("p",ys,c(r.errors[`crop_${f}_name`]),1)):d("",!0)]),e("div",ws,[e("label",{class:"block text-gray-700",for:`volume-${f}`},"What volume of this crop will you cultivate? *",8,xs),e("div",vs,[m(e("select",{class:"border border-gray-300 p-2 rounded-l","onUpdate:modelValue":u=>o.volumeUnit=u},Ps,8,ks),[[b,o.volumeUnit]]),m(e("input",{class:"w-full border border-gray-300 p-2 rounded-r",id:`volume-${f}`,placeholder:"E.g. 56",type:"text","onUpdate:modelValue":u=>o.volume=u},null,8,Us),[[h,o.volume]])]),r.errors[`crop_${f}_volume`]?(i(),l("p",Cs,c(r.errors[`crop_${f}_volume`]),1)):d("",!0)]),e("div",Fs,[e("div",As,[e("label",{class:"block text-gray-700",for:`start-month-${f}`},"Start Month *",8,Es),m(e("select",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:`start-month-${f}`,"onUpdate:modelValue":u=>o.startMonth=u},[Vs,(i(!0),l(w,null,v(this.monthList,u=>(i(),l("option",{value:u},c(u),9,Rs))),256))],8,Ss),[[b,o.startMonth]]),r.errors[`crop_${f}_startMonth`]?(i(),l("p",Ds,c(r.errors[`crop_${f}_startMonth`]),1)):d("",!0)]),e("div",Ms,[e("label",{class:"block text-gray-700",for:`end-month-${f}`},"End Month *",8,Is),m(e("select",{class:"w-full border border-gray-300 p-2 rounded mt-1",id:`end-month-${f}`,"onUpdate:modelValue":u=>o.endMonth=u},[Ls,(i(!0),l(w,null,v(this.monthList,u=>(i(),l("option",{value:u},c(u),9,Ts))),256))],8,Bs),[[b,o.endMonth]]),r.errors[`crop_${f}_endMonth`]?(i(),l("p",js,c(r.errors[`crop_${f}_endMonth`]),1)):d("",!0)])])]))),128)),e("button",{class:"rounded-lg text-[14px] leading-[20px] w-[180px] text-[#0d8a6a] bg-white border border-[#90D0BF] font-medium mb-6 py-2 px-4",onClick:s[46]||(s[46]=(...o)=>a.addAnotherCrop&&a.addAnotherCrop(...o))}," + Add another crop "),e("div",Ys,[zs,e("div",{class:"border border-dashed border-gray-300 p-4 rounded mt-1 text-center cursor-pointer",onClick:s[48]||(s[48]=(...o)=>a.triggerFileInput&&a.triggerFileInput(...o)),onDragover:s[49]||(s[49]=U(()=>{},["prevent"])),onDrop:s[50]||(s[50]=(...o)=>a.handleFileDrop&&a.handleFileDrop(...o))},[Zs,Gs,Os,e("input",{ref:"fileInput",class:"hidden",type:"file",accept:".pdf",onChange:s[47]||(s[47]=(...o)=>a.handleFileUpload&&a.handleFileUpload(...o))},null,544)],32),r.form.farmDocument?(i(),l("p",Js,c(r.form.farmDocument.name),1)):d("",!0)]),e("div",Ws,[e("button",{class:"bg-gray-200 text-gray-700 px-4 py-2 rounded",onClick:s[51]||(s[51]=(...o)=>a.previousStep&&a.previousStep(...o))}," Back "),e("button",{class:"bg-green-600 text-white px-4 py-2 rounded",onClick:s[52]||(s[52]=(...o)=>t.submitForm&&t.submitForm(...o))}," Submit ")])])])):d("",!0)],32)])])}var Qs=P(R,[["render",Ks]]);const A="http://127.0.0.1:8000",Hs={data(){return{step:1,form:{firstName:"",lastName:"",email:"",phoneCode:"+234",phone:"",age:"",gender:"",profilePicture:null,password:"",confirmPassword:""},profilePictureUrl:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTrsaTeFqurvUDvMYOcgZAd-JPf-dtLogrrog&s",showPassword:!1,showConfirmPassword:!1,errors:{},response:{user_id:""}}},watch:{"form.firstName"(t){t?/^[A-Za-z\s]+$/.test(t)?(this.errors.firstName="",delete this.errors.firstName):this.errors.firstName="First name cannot contain numbers":this.errors.firstName="First name is required"},"form.lastName"(t){t?/^[A-Za-z\s]+$/.test(t)?(this.errors.lastName="",delete this.errors.lastName):this.errors.lastName="Last name cannot contain numbers":this.errors.lastName="Last name is required"},"form.email"(t){t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?(this.errors.email="",delete this.errors.email):this.errors.email="Enter a valid email address":this.errors.email="Email is required"},"form.phone"(t){t?/^[0-9]{7,15}$/.test(t)?(this.errors.phone="",delete this.errors.phone):this.errors.phone="Enter a valid phone number (numbers only)":this.errors.phone="Phone number is required"},"form.age"(t){t?/^\d+$/.test(t)?(this.errors.age="",delete this.errors.age):this.errors.age="Enter a valid age (positive numbers only)":this.errors.age="Valid age is required"},"form.gender"(t){this.errors.gender=t?"":"Gender is required",t&&delete this.errors.gender},"form.password"(t){t?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(t)?(this.errors.password="",delete this.errors.password):this.errors.password="Password must be at least 8 characters long, contain one uppercase, one lowercase, one number, and one special character":this.errors.password="Password is required"},"form.confirmPassword"(t){t?t!==this.form.password?this.errors.confirmPassword="Passwords do not match":(this.errors.confirmPassword="",delete this.errors.confirmPassword):this.errors.confirmPassword="Confirm Password is required"}},methods:{registerUser(){return x(this,null,function*(){try{const t={user_type:"buyer",first_name:this.form.firstName,last_name:this.form.lastName,email:this.form.email,phone:`${this.form.phoneCode}${this.form.phone}`,gender:this.form.gender,new_password:this.form.password};console.log({requestData:t});const n=(yield(yield fetch(`${A}/api/method/farmer.api.user_api.create_user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json()).message;return n.status==201&&n.message?(console.log("User Registration Success:",n.message),n):(console.error("Unexpected API response format:",n),n)}catch(t){return console.error("Failed to register user:",t),t}})},upload_file(){return x(this,null,function*(){try{const t=new FormData;t.append("user_email",this.response.user_id),t.append("profile_image",this.form.profilePicture);const n=(yield(yield fetch(`${A}/api/method/farmer.api.user_api.upload_profile_picture`,{method:"POST",body:t})).json()).message;return n&&n.status==200?(console.log("Upload successful:",n.message),!0):(console.error("Unexpected response format:",n),!1)}catch(t){console.error("Upload failed:",t)}})},validateStep(){if(this.errors={},this.step===1){this.errors={};const t=/^[A-Za-z\s]+$/,s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,n=/^[0-9]{7,15}$/,p=/^[1-9]\d*$/;this.form.firstName?t.test(this.form.firstName)||(this.errors.firstName="First name cannot contain numbers"):this.errors.firstName="First name is required",this.form.lastName?t.test(this.form.lastName)||(this.errors.lastName="Last name cannot contain numbers"):this.errors.lastName="Last name is required",this.form.email?s.test(this.form.email)||(this.errors.email="Enter a valid email address"):this.errors.email="Email is required",this.form.phone?n.test(this.form.phone)||(this.errors.phone="Enter a valid phone number (numbers only)"):this.errors.phone="Phone number is required",this.form.age?p.test(this.form.age)||(this.errors.phone="Enter a valid age (positive numbers only)"):this.errors.age="Valid age is required",this.form.gender||(this.errors.gender="Gender is required")}if(this.step===2){const t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;this.form.password?t.test(this.form.password)||(this.errors.password="Password must be at least 8 characters long, contain one uppercase, one lowercase, one number, and one special character"):this.errors.password="Password is required",this.form.confirmPassword?this.form.confirmPassword!==this.form.password&&(this.errors.confirmPassword="Passwords do not match"):this.errors.confirmPassword="Confirm Password is required"}return Object.keys(this.errors).length===0},nextStep(){if(console.log("checking error",this.errors),this.validateStep())this.step<2&&this.step++;else return},previousStep(){this.step>1&&this.step--},togglePasswordVisibility(t){t==="password"?(this.showPassword=!this.showPassword,document.getElementById("password").type=this.showPassword?"text":"password"):t==="confirm-password"&&(this.showConfirmPassword=!this.showConfirmPassword,document.getElementById("confirm-password").type=this.showConfirmPassword?"text":"password")},triggerFileInput(){this.$refs.fileInput.click()},changeProfilePicture(t){const s=t.target.files[0];this.form.profilePicture=s;const n=new FileReader;n.onload=p=>{this.profilePictureUrl=p.target.result},n.readAsDataURL(s)},handleSubmit(){return x(this,null,function*(){if(this.validateStep()){if(this.step===2)try{const t=yield this.registerUser();console.log({respo:t}),t&&t.message==="User Created Successfully"?(this.response.user_id=t.data.user_id,(yield this.upload_file())?(console.log("Redirecting to login..."),window.location.href="/login"):console.error("Registration failed: Due to File Upload")):console.error("Registration failed:",t.message)}catch(t){console.error("Failed to register. Please try again!",t)}}else console.log("Form validation failed:",this.errors,this.validateStep())})}},name:"buyerRegister"},Xs={class:"container mx-auto p-4"},$s={class:"flex justify-between items-center mb-6"},et=e("i",{class:"fas fa-arrow-left"},null,-1),rt=k(" Back home "),st=[et,rt],tt=e("a",{class:"text-gray-600",href:"#"},[k(" Already have an account? "),e("span",{class:"text-green-600"},"Log in")],-1),ot={class:"max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-md"},it=e("h2",{class:"text-2xl font-semibold text-center mb-4"},"Create Account",-1),nt={key:0},lt=e("p",{class:"text-center text-gray-600 mb-8"},"Personal Information",-1),at={class:"grid md:grid-cols-2 gap-4 mb-4"},dt=e("label",{class:"block text-gray-700",for:"first-name"},"First Name *",-1),mt={key:0,class:"text-red-500 text-sm mt-1"},ct=e("label",{class:"block text-gray-700",for:"last-name"},"Last Name *",-1),ut={key:0,class:"text-red-500 text-sm mt-1"},pt={class:"mb-4"},ft=e("label",{class:"block text-gray-700",for:"email"},"Email",-1),ht={key:0,class:"text-red-500 text-sm mt-1"},gt={class:"mb-4"},bt=e("label",{class:"block text-gray-700",for:"phone"},"Phone *",-1),_t={class:"flex"},yt=e("option",{value:"+234"},"+234",-1),wt=[yt],xt={key:0,class:"text-red-500 text-sm mt-1"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},kt=e("label",{class:"block text-gray-700",for:"age-group"},"Age Group *",-1),Nt={key:0,class:"text-red-500 text-sm mt-1"},qt=e("label",{class:"block text-gray-700"},"Gender *",-1),Pt={class:"flex items-center mt-1"},Ut=e("label",{class:"mr-4",for:"male"},"Male",-1),Ct=e("label",{for:"female"},"Female",-1),Ft={key:0,class:"text-red-500 text-sm mt-1"},At={class:"mb-4"},Et=e("label",{class:"block text-gray-700",for:"profile-picture"}," Upload profile picture (optional) ",-1),St={class:"flex items-center mt-1"},Vt=["src"],Rt={class:"flex justify-between"},Dt={key:1},Mt=e("h2",{class:"text-2xl font-semibold text-center mb-4"}," Security Setup ",-1),It={class:"mb-4"},Bt=e("label",{class:"block text-gray-700",for:"password"},"Password *",-1),Lt={class:"relative"},Tt=e("i",{class:"fas fa-eye"},null,-1),jt=[Tt],Yt={key:0,class:"text-red-500 text-sm mt-1"},zt={class:"mb-4"},Zt=e("label",{class:"block text-gray-700",for:"confirm-password"},"Confirm password *",-1),Gt={class:"relative"},Ot=e("i",{class:"fas fa-eye"},null,-1),Jt=[Ot],Wt={key:0,class:"text-red-500 text-sm mt-1"},Kt=e("div",{class:"mb-4"},[e("h3",{class:"text-gray-700 font-semibold"},"Password Requirements"),e("ul",{class:"list-disc list-inside text-gray-600"},[e("li",null,"Must be at least 8 characters"),e("li",null,"Must contain one special character and one number"),e("li",null,"Must contain one uppercase and lowercase letter")])],-1),Qt={class:"flex justify-between"};function Ht(t,s,n,p,r,a){return i(),l("div",Xs,[e("div",$s,[e("a",{class:"text-green-600",onClick:s[0]||(s[0]=o=>t.$emit("goBack")),href:"#"},st),tt]),e("div",ot,[it,e("form",{class:"multiform",onSubmit:s[17]||(s[17]=U((...o)=>a.handleSubmit&&a.handleSubmit(...o),["prevent"]))},[r.step===1?(i(),l("div",nt,[lt,e("div",at,[e("div",null,[dt,m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.firstName,"border-gray-300":!r.errors.firstName}]),id:"first-name",placeholder:"First Name",type:"text","onUpdate:modelValue":s[1]||(s[1]=o=>r.form.firstName=o),required:""},null,2),[[h,r.form.firstName]]),r.errors.firstName?(i(),l("p",mt,c(r.errors.firstName),1)):d("",!0)]),e("div",null,[ct,m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.lastName,"border-gray-300":!r.errors.lastName}]),id:"last-name",placeholder:"Last Name",type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>r.form.lastName=o)},null,2),[[h,r.form.lastName]]),r.errors.lastName?(i(),l("p",ut,c(r.errors.lastName),1)):d("",!0)])]),e("div",pt,[ft,m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.email,"border-gray-300":!r.errors.email}]),id:"email",placeholder:"Email",type:"email","onUpdate:modelValue":s[3]||(s[3]=o=>r.form.email=o),required:""},null,2),[[h,r.form.email]]),r.errors.email?(i(),l("p",ht,c(r.errors.email),1)):d("",!0)]),e("div",gt,[bt,e("div",_t,[m(e("select",{class:g(["border p-2 rounded-l",{"border-red-500":r.errors.phone,"border-gray-300":!r.errors.phone}]),"onUpdate:modelValue":s[4]||(s[4]=o=>r.form.phoneCode=o)},wt,2),[[b,r.form.phoneCode]]),m(e("input",{class:g(["w-full border p-2 rounded-r",{"border-red-500":r.errors.phone,"border-gray-300":!r.errors.phone}]),id:"phone",placeholder:"Phone Number",type:"text","onUpdate:modelValue":s[5]||(s[5]=o=>r.form.phone=o),required:""},null,2),[[h,r.form.phone]])]),r.errors.phone?(i(),l("p",xt,c(r.errors.phone),1)):d("",!0)]),e("div",vt,[e("div",null,[kt,m(e("input",{type:"number",id:"age-group",class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.age,"border-gray-300":!r.errors.age}]),placeholder:"Enter Age",min:"1","onUpdate:modelValue":s[6]||(s[6]=o=>r.form.age=o),required:""},null,2),[[h,r.form.age]]),r.errors.age?(i(),l("p",Nt,c(r.errors.age),1)):d("",!0)]),e("div",null,[qt,e("div",Pt,[m(e("input",{class:"mr-2",id:"male",name:"gender",type:"radio",value:"Male","onUpdate:modelValue":s[7]||(s[7]=o=>r.form.gender=o)},null,512),[[y,r.form.gender]]),Ut,m(e("input",{class:"mr-2",id:"female",name:"gender",type:"radio",value:"Female","onUpdate:modelValue":s[8]||(s[8]=o=>r.form.gender=o)},null,512),[[y,r.form.gender]]),Ct]),r.errors.gender?(i(),l("p",Ft,c(r.errors.gender),1)):d("",!0)])]),e("div",At,[Et,e("div",St,[e("img",{id:"profilePic",alt:"Profile picture",class:"w-10 h-10 rounded-full mr-4",src:this.profilePictureUrl},null,8,Vt),e("input",{type:"file",id:"fileInput",onChange:s[9]||(s[9]=(...o)=>a.changeProfilePicture&&a.changeProfilePicture(...o))},null,32)])]),e("div",Rt,[e("button",{class:"bg-green-600 text-white px-4 py-2 rounded ml-auto",onClick:s[10]||(s[10]=(...o)=>a.nextStep&&a.nextStep(...o))}," Continue ")])])):d("",!0),r.step===2?(i(),l("div",Dt,[Mt,e("div",It,[Bt,e("div",Lt,[m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.password,"border-gray-300":!r.errors.password}]),id:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",type:"password","onUpdate:modelValue":s[11]||(s[11]=o=>r.form.password=o)},null,2),[[h,r.form.password]]),e("button",{class:"absolute right-2 top-2 text-gray-600",type:"button",onClick:s[12]||(s[12]=o=>a.togglePasswordVisibility("password"))},jt)]),r.errors.password?(i(),l("p",Yt,c(r.errors.password),1)):d("",!0)]),e("div",zt,[Zt,e("div",Gt,[m(e("input",{class:g(["w-full border p-2 rounded mt-1",{"border-red-500":r.errors.confirmPassword,"border-gray-300":!r.errors.confirmPassword}]),id:"confirm-password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",type:"password","onUpdate:modelValue":s[13]||(s[13]=o=>r.form.confirmPassword=o)},null,2),[[h,r.form.confirmPassword]]),e("button",{class:"absolute right-2 top-2 text-gray-600",type:"button",onClick:s[14]||(s[14]=o=>a.togglePasswordVisibility("confirm-password"))},Jt)]),r.errors.confirmPassword?(i(),l("p",Wt,c(r.errors.confirmPassword),1)):d("",!0)]),Kt,e("div",Qt,[e("button",{class:"bg-gray-200 text-gray-700 px-4 py-2 rounded",onClick:s[15]||(s[15]=(...o)=>a.previousStep&&a.previousStep(...o))}," Back "),e("button",{class:"bg-green-600 text-white px-4 py-2 rounded",onClick:s[16]||(s[16]=(...o)=>t.submitForm&&t.submitForm(...o))}," Submit ")])])):d("",!0)],32)])])}var Xt=P(Hs,[["render",Ht]]),$t="/assets/farmer/frontend/assets/buyerIcon.4fc4bdd0.svg",eo="/assets/farmer/frontend/assets/vendorIcon.c3c11c63.svg",ro="/assets/farmer/frontend/assets/farmerIcon.af9f6ef6.svg",so="/assets/farmer/frontend/assets/deliveryAgentIcon.1252a6f7.svg";const to={data(){return{showFarmerForm:!1,showBuyerForm:!1}},methods:{selectUserType(t){t==="farmer"?this.showFarmerForm=!0:t==="buyer"?this.showBuyerForm=!0:alert("Signup for "+t+" is under development!")}},components:{farmerRegister:Qs,buyersRegister:Xt}},_=t=>(S("data-v-38fc78c4"),t=t(),V(),t),oo={key:0,class:"bg-green-50 flex items-center justify-center min-h-screen"},io={class:"bg-white rounded-lg shadow-lg p-8 w-full max-w-3xl mb-40"},no=_(()=>e("h1",{class:"text-2xl font-semibold text-center mb-2"},"Create an account",-1)),lo=_(()=>e("p",{class:"text-center text-gray-600 mb-6"}," How would you like to sign up? ",-1)),ao={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6"},mo=_(()=>e("img",{alt:"Icon representing a buyer",class:"mb-2",src:$t},null,-1)),co=_(()=>e("p",{class:"text-center"},"Buyer",-1)),uo=[mo,co],po=_(()=>e("img",{alt:"Icon representing a vendor",class:"mb-2",src:eo},null,-1)),fo=_(()=>e("p",{class:"text-center"},"Vendor",-1)),ho=[po,fo],go=_(()=>e("img",{alt:"Icon representing a farmer",class:"mb-2",src:ro},null,-1)),bo=_(()=>e("p",{class:"text-center"},"Farmer",-1)),_o=[go,bo],yo=_(()=>e("img",{alt:"Icon representing a delivery agent",class:"mb-2",src:so},null,-1)),wo=_(()=>e("p",{class:"text-center"},"Delivery Agent",-1)),xo=[yo,wo],vo=_(()=>e("p",{class:"text-center text-gray-600 mt-4"},[k(" Already have an account? "),e("a",{class:"text-green-500",href:"#"}," Log in ")],-1));function ko(t,s,n,p,r,a){const o=F("farmerRegister"),f=F("buyersRegister");return i(),l(w,null,[!r.showFarmerForm&&!r.showBuyerForm?(i(),l("div",oo,[e("div",io,[no,lo,e("div",ao,[e("div",{class:"flex flex-col items-center p-4 bg-gray-50 rounded-lg shadow cursor-pointer",onClick:s[0]||(s[0]=u=>a.selectUserType("buyer"))},uo),e("div",{class:"flex flex-col items-center p-4 bg-gray-50 rounded-lg shadow cursor-pointer",onClick:s[1]||(s[1]=u=>a.selectUserType("vendor"))},ho),e("div",{class:"flex flex-col items-center p-4 bg-gray-50 rounded-lg shadow cursor-pointer",onClick:s[2]||(s[2]=u=>a.selectUserType("farmer"))},_o),e("div",{class:"flex flex-col items-center p-4 bg-gray-50 rounded-lg shadow cursor-pointer",onClick:s[3]||(s[3]=u=>a.selectUserType("delivery_agent"))},xo)]),vo])])):d("",!0),r.showFarmerForm?(i(),C(o,{key:1,onGoBack:s[4]||(s[4]=u=>r.showFarmerForm=!1)})):d("",!0),r.showBuyerForm?(i(),C(f,{key:2,onGoBack:s[5]||(s[5]=u=>r.showBuyerForm=!1)})):d("",!0)],64)}var Po=P(to,[["render",ko],["__scopeId","data-v-38fc78c4"]]);export{Po as default};
